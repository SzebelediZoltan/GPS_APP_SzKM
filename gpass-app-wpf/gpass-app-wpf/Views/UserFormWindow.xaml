<Window x:Class="gpass_app_wpf.Views.UserFormWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding Title}" Height="420" Width="420"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Cím -->
        <TextBlock Grid.Row="0" Text="{Binding Title}" FontSize="18" FontWeight="Bold"
                   Foreground="#2c3e50" Margin="0,0,0,14"/>

        <!-- Hibasáv -->
        <Border Grid.Row="1"
                Background="#fdecea" BorderBrush="#e74c3c" BorderThickness="1"
                CornerRadius="4" Padding="10,7" Margin="0,0,0,12"
                Visibility="{Binding HasError, Converter={StaticResource BoolToVisibility}}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="⚠ " Foreground="#c0392b" FontWeight="Bold"/>
                <TextBlock Text="{Binding ErrorMessage}" Foreground="#c0392b"
                           TextWrapping="Wrap" FontSize="13"/>
            </StackPanel>
        </Border>

        <!-- Form mezők -->
        <StackPanel Grid.Row="2">

            <TextBlock Text="Felhasználónév *" Foreground="#555" Margin="0,0,0,3"/>
            <TextBox Padding="6,5" Margin="0,0,0,2"
                     Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                     IsEnabled="{Binding Saving, Converter={StaticResource InverseBool}}"/>
            <TextBlock Text="{Binding UsernameError}" Foreground="#c0392b" FontSize="11"
                       Margin="2,0,0,8"
                       Visibility="{Binding HasUsernameError, Converter={StaticResource BoolToVisibility}}"/>

            <TextBlock Text="Email *" Foreground="#555" Margin="0,0,0,3"/>
            <TextBox Padding="6,5" Margin="0,0,0,2"
                     Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                     IsEnabled="{Binding Saving, Converter={StaticResource InverseBool}}"/>
            <TextBlock Text="{Binding EmailError}" Foreground="#c0392b" FontSize="11"
                       Margin="2,0,0,8"
                       Visibility="{Binding HasEmailError, Converter={StaticResource BoolToVisibility}}"/>

            <TextBlock Foreground="#555" Margin="0,0,0,3">
                <Run Text="Jelszó"/>
                <Run Text=" (szerkesztésnél üresen hagyható)" Foreground="#999" FontSize="11"/>
            </TextBlock>
            <PasswordBox x:Name="passwordBox" Padding="6,5" Margin="0,0,0,2"
                         IsEnabled="{Binding Saving, Converter={StaticResource InverseBool}}"/>
            <TextBlock Text="{Binding PasswordError}" Foreground="#c0392b" FontSize="11"
                       Margin="2,0,0,8"
                       Visibility="{Binding HasPasswordError, Converter={StaticResource BoolToVisibility}}"/>

            <CheckBox Content="Admin jogosultság" Margin="0,4,0,0"
                      IsChecked="{Binding IsAdmin}"/>

        </StackPanel>

        <!-- Gombok -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
            <Button Content="Mégse" Padding="14,7" Margin="0,0,10,0"
                    Command="{Binding CancelCommand}"/>
            <Button Padding="14,7" Background="#2c3e50" Foreground="White" FontWeight="SemiBold"
                    Command="{Binding SaveCommand}">
                <Button.Content>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="⏳ " Visibility="{Binding Saving, Converter={StaticResource BoolToVisibility}}"/>
                        <TextBlock Text="Mentés"/>
                    </StackPanel>
                </Button.Content>
            </Button>
        </StackPanel>

    </Grid>
</Window>
