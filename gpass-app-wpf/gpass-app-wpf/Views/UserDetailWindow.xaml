<Window x:Class="gpass_app_wpf.Views.UserDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding Title}" Height="580" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">

    <DockPanel Margin="16">

        <!-- FejlÃ©c -->
        <StackPanel DockPanel.Dock="Top" Margin="0,0,0,10">
            <TextBlock Text="{Binding Title}" FontSize="18" FontWeight="Bold" Foreground="#2c3e50"/>
            <TextBlock Text="{Binding UserInfo}" FontSize="12" Foreground="#777" Margin="0,3,0,0"/>
            <TextBlock Text="â³ BetÃ¶ltÃ©s..." FontStyle="Italic" Foreground="#999" Margin="0,4,0,0"
                       Visibility="{Binding Loading, Converter={StaticResource BoolToVisibility}}"/>
        </StackPanel>

        <!-- HibaÃ¼zenetek -->
        <Border DockPanel.Dock="Top"
                Background="#fff3cd" BorderBrush="#ffc107" BorderThickness="1"
                CornerRadius="4" Padding="8,6" Margin="0,0,0,8"
                Visibility="{Binding HasErrors, Converter={StaticResource BoolToVisibility}}">
            <TextBlock Text="{Binding Errors}" Foreground="#856404" FontSize="11" TextWrapping="Wrap"/>
        </Border>

        <TabControl>

            <!-- TRIPEK -->
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ—º Tripek  "/>
                        <TextBlock Text="{Binding Trips.Count}" FontWeight="Bold"/>
                        <TextBlock Text=" db"/>
                    </StackPanel>
                </TabItem.Header>
                <DockPanel>
                    <Border DockPanel.Dock="Bottom" Background="#f8f8f8" Padding="8,6" BorderBrush="#ddd" BorderThickness="0,1,0,0">
                        <StackPanel Orientation="Horizontal">
                            <Button Content="âœ•  Trip tÃ¶rlÃ©se" Padding="10,5" Background="#e74c3c" Foreground="White"
                                    Command="{Binding DeleteTripCommand}"/>
                        </StackPanel>
                    </Border>
                    <DataGrid ItemsSource="{Binding Trips}"
                              SelectedItem="{Binding SelectedTrip, Mode=TwoWay}"
                              AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False"
                              GridLinesVisibility="Horizontal" AlternatingRowBackground="#fafafa">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID"         Binding="{Binding id}"          Width="60"/>
                            <DataGridTextColumn Header="Trip #"     Binding="{Binding trip_number}" Width="80"/>
                            <DataGridTextColumn Header="LÃ©trehozva" Binding="{Binding created_at, Converter={StaticResource IsoDate}}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>

            <!-- MARKEREK -->
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ“ Markerek  "/>
                        <TextBlock Text="{Binding Markers.Count}" FontWeight="Bold"/>
                        <TextBlock Text=" db"/>
                    </StackPanel>
                </TabItem.Header>
                <DockPanel>
                    <Border DockPanel.Dock="Bottom" Background="#f8f8f8" Padding="8,6" BorderBrush="#ddd" BorderThickness="0,1,0,0">
                        <StackPanel Orientation="Horizontal">
                            <Button Content="âœ•  Marker tÃ¶rlÃ©se" Padding="10,5" Background="#e74c3c" Foreground="White"
                                    Command="{Binding DeleteMarkerCommand}"/>
                        </StackPanel>
                    </Border>
                    <DataGrid ItemsSource="{Binding Markers}"
                              SelectedItem="{Binding SelectedMarker, Mode=TwoWay}"
                              AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False"
                              GridLinesVisibility="Horizontal" AlternatingRowBackground="#fafafa">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID"         Binding="{Binding id}"          Width="50"/>
                            <DataGridTextColumn Header="TÃ­pus"      Binding="{Binding marker_type}" Width="100"/>
                            <DataGridTextColumn Header="Pont"       Binding="{Binding score}"       Width="55"/>
                            <DataGridTextColumn Header="Lat"        Binding="{Binding lat}"         Width="95"/>
                            <DataGridTextColumn Header="Lng"        Binding="{Binding lng}"         Width="95"/>
                            <DataGridTextColumn Header="LÃ©trehozva" Binding="{Binding created_at, Converter={StaticResource IsoDate}}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>

            <!-- BARÃTOK -->
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ¤ BarÃ¡tok  "/>
                        <TextBlock Text="{Binding Friends.Count}" FontWeight="Bold"/>
                        <TextBlock Text=" db"/>
                    </StackPanel>
                </TabItem.Header>
                <DockPanel>
                    <Border DockPanel.Dock="Bottom" Background="#f8f8f8" Padding="8,6" BorderBrush="#ddd" BorderThickness="0,1,0,0">
                        <StackPanel Orientation="Horizontal">
                            <Button Content="ðŸ”„  StÃ¡tusz vÃ¡ltÃ¡s" Padding="10,5" Margin="0,0,8,0"
                                    Background="#2980b9" Foreground="White"
                                    Command="{Binding ToggleFriendCommand}"/>
                            <Button Content="âœ•  TÃ¶rlÃ©s" Padding="10,5" Background="#e74c3c" Foreground="White"
                                    Command="{Binding DeleteFriendCommand}"/>
                        </StackPanel>
                    </Border>
                    <DataGrid ItemsSource="{Binding Friends}"
                              SelectedItem="{Binding SelectedFriend, Mode=TwoWay}"
                              AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False"
                              GridLinesVisibility="Horizontal" AlternatingRowBackground="#fafafa">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID"         Binding="{Binding id}"          Width="50"/>
                            <DataGridTextColumn Header="KÃ¼ldÅ‘ ID"   Binding="{Binding sender_id}"   Width="85"/>
                            <DataGridTextColumn Header="FogadÃ³ ID"  Binding="{Binding receiver_id}" Width="85"/>
                            <DataGridTextColumn Header="Ãllapot"    Binding="{Binding status}"      Width="85"/>
                            <DataGridTextColumn Header="LÃ©trehozva" Binding="{Binding created_at, Converter={StaticResource IsoDate}}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>

            <!-- CLÃNOK -->
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ›¡ ClÃ¡nok  "/>
                        <TextBlock Text="{Binding Clans.Count}" FontWeight="Bold"/>
                        <TextBlock Text=" db"/>
                    </StackPanel>
                </TabItem.Header>
                <DataGrid ItemsSource="{Binding Clans}" AutoGenerateColumns="False"
                          IsReadOnly="True" CanUserAddRows="False"
                          GridLinesVisibility="Horizontal" AlternatingRowBackground="#fafafa">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ClÃ¡n ID"     Binding="{Binding clan_id}"   Width="75"/>
                        <DataGridTextColumn Header="ClÃ¡n neve"   Binding="{Binding clan_name}" Width="160"/>
                        <DataGridTextColumn Header="Csatlakozott" Binding="{Binding joined_at, Converter={StaticResource IsoDate}}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>

            <!-- TRIP PONTOK -->
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ“Œ Trip pontok  "/>
                        <TextBlock Text="{Binding TripPoints.Count}" FontWeight="Bold"/>
                        <TextBlock Text=" db"/>
                    </StackPanel>
                </TabItem.Header>
                <DataGrid ItemsSource="{Binding TripPoints}" AutoGenerateColumns="False"
                          IsReadOnly="True" CanUserAddRows="False"
                          GridLinesVisibility="Horizontal" AlternatingRowBackground="#fafafa">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID"       Binding="{Binding id}"          Width="55"/>
                        <DataGridTextColumn Header="Trip ID"  Binding="{Binding trip_id}"     Width="75"/>
                        <DataGridTextColumn Header="Lat"      Binding="{Binding lat}"         Width="110"/>
                        <DataGridTextColumn Header="Lng"      Binding="{Binding lng}"         Width="110"/>
                        <DataGridTextColumn Header="RÃ¶gzÃ­tve" Binding="{Binding recorded_at, Converter={StaticResource IsoDate}}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>

        </TabControl>
    </DockPanel>
</Window>
